import{a0 as K,p as N,a as O,f as L,A as W,c as X,t as I,a1 as Y,d as g,e as Z,S as ee,x as ae,_ as i,j as t,a2 as w,k as q,P as a,g as se,F as D,i as m,R as te,a3 as E,U as re,Q as s,n as ie,a4 as le,a5 as oe,V as ne}from"../chunks/DV-hihCm.js";import{L as de}from"../chunks/D7VgVt5c.js";import{I as fe}from"../chunks/boSQUZcc.js";import{B as ce,c as ve}from"../chunks/CIPFYnYa.js";import{a as ue,A as pe}from"../chunks/DmjiqfOo.js";import{a as me}from"../chunks/BWtG5-W7.js";var ge=L("<!> <!>",1),_e=L('<div><form><div class="flex flex-col gap-6"><div class="flex flex-col items-center gap-2"><a href="/" class="flex flex-col items-center gap-2 font-medium"><div class="flex size-8 items-center justify-center rounded-md"><!></div> <span class="sr-only">Afrog Security.</span></a> <h1 class="text-xl font-bold">Afrog Security.</h1> <div class="text-center text-sm"> </div></div> <div class="flex flex-col gap-6"><div class="grid gap-3"><!></div> <!></div></div></form></div>');function xe(_,l){const v=K();N(l,!0);const[x,F]=ee(),o=()=>te(re,"$t",x);let k=O(l,"ref",15,null),M=ae(l,["$$slots","$$events","$$legacy","ref","class"]),u=w(""),f=w(!1),n=w("");async function Q(e){if(e.preventDefault(),!t(u).trim()){i(n,o()("please_enter_password"),!0);return}i(f,!0),i(n,"");try{const r=await ue.login(t(u));r.success?(me.setToken(r.token),ne("/",{replaceState:!0})):(i(n,r.message||o()("login_failed"),!0),i(n,o()("login_failed"),!0))}catch(r){r instanceof pe?i(n,r.message,!0):i(n,o()("login_failed"),!0)}finally{i(f,!1)}}var c=_e();W(c,e=>({class:e,...M}),[()=>ve("flex flex-col gap-6",l.class)]);var $=a(c),A=a($),h=a(A),b=a(h),S=a(b),R=a(S);de(R,{class:"size-"}),s(S),ie(2),s(b);var j=m(b,4),T=a(j,!0);s(j),s(h);var z=m(h,2),y=a(z),U=a(y);{let e=q(()=>t(n)?"true":void 0),r=q(()=>o()("please_enter_password"));fe(U,{get"aria-invalid"(){return t(e)},get id(){return`password-${v}`},type:"password",required:!0,get disabled(){return t(f)},get placeholder(){return t(r)},get value(){return t(u)},set value(p){i(u,p,!0)}})}s(y);var V=m(y,2);ce(V,{type:"submit",class:"w-full",get disabled(){return t(f)},children:(e,r)=>{var p=ge(),P=se(p);{var C=d=>{le(d,{class:"size-4 animate-spin"})};D(P,d=>{t(f)&&d(C)})}var G=m(P,2);{var H=d=>{var B=oe();I(J=>E(B,J),[()=>o()("login")]),g(d,B)};D(G,d=>{t(f)||d(H)})}g(e,p)},$$slots:{default:!0}}),s(z),s(A),s($),s(c),X(c,e=>k(e),()=>k()),I(e=>E(T,e),[()=>o()("login_tip")]),Y("submit",$,Q),g(_,c),Z(),F()}var $e=L('<div class="flex min-h-svh flex-col items-center justify-center gap-6 bg-background p-6 md:p-10"><div class="w-full max-w-sm"><!></div></div>');function Ae(_){var l=$e(),v=a(l),x=a(v);xe(x,{}),s(v),s(l),g(_,l)}export{Ae as component};
